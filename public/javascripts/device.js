// Generated by CoffeeScript 1.7.1
(function() {
  $(function() {
    var allhide, connecting, dc, initializing, peerIDsetting, showError, showImage, showMessage, waiting;
    dc = new ns.DeviceClass();
    peerIDsetting = function(id) {
      return $('#device-id').text(id);
    };
    allhide = function() {
      $('#initialize').hide();
      $('#peerid-container').hide();
      $('#monitor-video').hide();
      $('#device-video').hide();
      $('#connecting').hide();
      return $('#image-container').hide();
    };
    initializing = function() {
      allhide();
      return $('#initialize').show();
    };
    waiting = function() {
      allhide();
      return $('#peerid-container').show();
    };
    connecting = function() {
      allhide();
      return $('#connecting').show();
    };
    showError = function(errMessage) {
      console.log("showError :" + errMessage);
      return alert(errMessage);
    };
    showMessage = function(message) {
      return $('#message').text(message);
    };
    showImage = function(image) {
      $('#sent-image')[0].src = image;
      $('#connecting').hide();
      return $('#image-container').show();
    };
    $('#end-call').click(function() {
      dc.closeCall();
      return waiting();
    });
    $('#close-image').click(function() {
      $('#sent-image')[0].src = "";
      $('#image-container').hide();
      return $('#connecting').show();
    });
    $('#terminate').click(function() {
      dc.terminate();
      return window.open('about:blank', '_self').close();
    });
    dc.onOpen(peerIDsetting);
    dc.onError(showError, waiting);
    dc.onConnection(showMessage, showImage);
    dc.onCall($('#monitor-video'), connecting, waiting);
    return dc.initialize($('#device-video'), initializing, waiting);
  });

}).call(this);
